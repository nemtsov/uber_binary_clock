WARNING: as this is made for the JS1k competition, the code isn't pretty by any standards. Instead, it is optimized to be under 1K (when run through the closure compiler: http://closure-compiler.appspot.com/home).
